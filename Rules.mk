#===============================================================================
# ディレクトリ指定
#===============================================================================
BUILD ?= Build
SOURCE ?= Source
INCLUDE ?= Include

#===============================================================================
# ビルド準備
#===============================================================================
CXX := g++
CXXFLAGS += -I$(INCLUDE)

SOURCES := $(shell find $(SOURCE) -name '*.cpp')
OBJECTS := $(patsubst $(SOURCE)/%.cpp, $(BUILD)/%.o, $(SOURCES))

OUTPUT := $(DIST)/$(TARGET)

#===============================================================================
# ビルドルール
#===============================================================================
$(OUTPUT): $(OBJECTS)
	@mkdir -p $(dir $@)
	@echo "Linking..."
	$(CXX) $^ -o $@

$(BUILD)/%.o: $(SOURCE)/%.cpp
	@mkdir -p $(dir $@)
	@echo "Compiling..."
	$(CXX) $(CXXFLAGS) -c $^ -o $@