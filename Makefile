#===============================================================================
# ビルド設定
#===============================================================================
TARGET := GCG
DIST := Dist
BUILD := Build
SOURCE := Source
INCLUDES := Include

CXXFLAGS += -std=c++23 -Wall -O2

#===============================================================================
# ビルドルール読み込み
#===============================================================================
include Rules.mk

#===============================================================================
# デフォルトターゲット
#===============================================================================
.PHONY: all clean run

all: $(OUTPUT)

$(OUTPUT): $(OBJECTS)
	@mkdir -p $(dir $@)
	@echo "Linking..."
	$(CXX) $^ -o $@

$(OBJECTS): $(SOURCES)
	@mkdir -p $(dir $@)
	@echo "Compiling..."
	$(CXX) -c $^ -o $@

#===============================================================================
# クリーン
#===============================================================================
clean:
	@echo "Cleaning..."
	@rm -rf $(BUILD) $(OUTPUT)

#===============================================================================
# 実行
#===============================================================================
run: $(OUTPUT)
	@$(DIST)/Test.bat
